<div id="supersetDashboardContainer"
    style="display:none; width:100%; height:100vh; position:fixed; top:0; left:0; background:white; z-index:1000;">

    <div id="supersetDashboardMount" style="width:100%; height:100%;"></div>

    <button id="exitDashboardBtn" style="
      position:absolute; top:15px; right:15px; z-index:10;
      padding:10px 15px; background:#3f7db5FF; color:white; border:none; border-radius:5px; cursor:pointer;
    ">Exit Dashboard</button>
</div>





import { SupersetEmbeddedSDK } from 'https://cdn.jsdelivr.net/npm/@superset-ui/embedded-sdk/dist/esm/index.js';

const dashboardBtn = document.getElementById('dashboardBtn');
const supersetContainer = document.getElementById('supersetDashboardContainer');
const exitDashboardBtn = document.getElementById('exitDashboardBtn');

let sdkDashboard = null;

dashboardBtn.addEventListener('click', async () => {
supersetContainer.style.display = 'block';

if (!sdkDashboard) {
try {
const tokenResp = await fetch('/get_guest_token');
const data = await tokenResp.json();
if (!data.token) throw new Error('No guest token returned');

sdkDashboard = await SupersetEmbeddedSDK.createDashboard({
id: 'e9413e09-3526-47c6-9867-e9230f411f3b',
mountPoint: document.getElementById('supersetDashboardMount'),
height: '100vh',
guestToken: data.token
});
} catch (err) {
console.error('Failed to load superset dashboard:', err);
alert('unable to load dashboard. check console for details.');
}
}
});
exitDashboardBtn.addEventListener('click', () => {
supersetContainer.style.display = 'none';
if (sdkDashboard) sdkDashboard.unmount(); // unmount the dashboard
sdkDashboard = null;
document.getElementById('supersetDashboardMount').innerHTML = '';
});



<app class="py">
    @app.route('/get_guest_token')
    def get_guest_token():
    """
    1) Log into Superset using admin username/password (from env vars).
    2) Use the returned access_token to request a guest_token for the dashboard.
    3) Return JSON: { "token": "<guest-token>" }.
        """
        superset_url = "http://localhost:8088" # the Superset host the browser uses

        # 1) Login to Superset to get an access_token
        login_payload = {
        "username": os.environ.get("SUPERSET_ADMIN_USERNAME"),
        "password": os.environ.get("SUPERSET_ADMIN_PASSWORD"),
        "provider": "db",
        "refresh": True
        }
        login_resp = requests.post(
        f"{superset_url}/api/v1/security/login", json=login_payload)
        if login_resp.status_code != 200:
        return jsonify({"error": "Superset login failed", "details": login_resp.text}), 500

        access_token = login_resp.json().get("access_token")
        if not access_token:
        return jsonify({"error": "No access token returned from Superset login"}), 500

        # 2) Request a guest token for the dashboard
        # same id as used in superset_dashboard route
        dashboard_id = "e9413e09-3526-47c6-9867-e9230f411f3b"
        guest_payload = {
        "resources": [{"type": "dashboard", "id": dashboard_id}],
        "rls": [],
        "user": {"username": "guest_user", "first_name": "Guest", "last_name": "Viewer"}
        }
        headers = {"Authorization": f"Bearer {access_token}",
        "Content-Type": "application/json"}
        guest_resp = requests.post(
        f"{superset_url}/api/v1/security/guest_token/", headers=headers, json=guest_payload)

        if guest_resp.status_code != 200:
        return jsonify({"error": "Guest token request failed", "details": guest_resp.text}), 500

        token = guest_resp.json().get("token")
        if not token:
        return jsonify({"error": "No token returned from Superset guest_token API"}), 500

        return jsonify({"token": token})

</app>